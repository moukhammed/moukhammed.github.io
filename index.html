<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lumipedia</title>
<link rel="stylesheet" href="style.css">
<style>
  /* ===== Jeu ===== */
  #game-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 50px auto;
      text-align: center;
  }
  canvas {
      background: #f0f0f0;
      border: 3px solid #5b4fff;
      border-radius: 15px;
      display: block;
      margin: 0 auto;
  }
  #start-btn, #restart-btn {
      padding: 12px 25px;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      background: linear-gradient(45deg,#5b4fff,#00c6ff);
      color: white;
      margin-top: 10px;
  }
  #bonus-text {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.2rem;
      font-weight: bold;
      color: green;
  }

  /* === Contr√¥les mobile === */
  #mobile-controls {
      display: none;
      margin-top: 15px;
      text-align: center;
  }
  #mobile-controls button {
      font-size: 2rem;
      padding: 15px;
      margin: 5px;
      border-radius: 15px;
      border: none;
      background: #5b4fff;
      color: white;
  }

</style>
</head>
<body>

<header>
  <h1>Lumipedia</h1>
  <button id="theme-toggle" class="theme-toggle">üåô Mode sombre</button>
</header>

<div class="container">
  <nav>
    <a href="#intro">Accueil</a>
    <a href="#tableau">Tableau</a>
    <a href="ia.html">Th√®me IA</a>
    <a href="cybersecurite.html">Th√®me Cybers√©curit√©</a>
  </nav>

  <main>
    <section id="intro">
      <h2>Bienvenue sur Lumipedia</h2>
      <img src="accueil.webp" alt="Illustration IA et cybers√©curit√©">
      <p>Lumipedia est une encyclop√©die d√©di√©e √† l‚ÄôIntelligence Artificielle et √† la Cybers√©curit√©.</p>
    </section>

    <section id="tableau">
      <h2>Comparatif rapide</h2>
      <table>
        <tr><th>Th√®me</th><th>Description</th></tr>
        <tr><td>IA</td><td>Compr√©hension des algorithmes intelligents</td></tr>
        <tr><td>Cybers√©curit√©</td><td>Protection des donn√©es et syst√®mes</td></tr>
      </table>
    </section>
  </main>
</div>

<!-- ===== Jeu ===== -->
<div id="game-container">
    <div id="bonus-text"></div>
    <canvas id="game" width="600" height="400"></canvas>
    <button id="start-btn">Commencer</button>
    <button id="restart-btn" style="display:none;">Recommencer</button>

    <!-- === Contr√¥les mobile === -->
    <div id="mobile-controls">
        <button data-key="ArrowLeft">‚¨ÖÔ∏è</button>
        <button data-key="ArrowUp">‚¨ÜÔ∏è</button>
        <button data-key="ArrowDown">‚¨áÔ∏è</button>
        <button data-key="ArrowRight">‚û°Ô∏è</button>
    </div>
</div>

<footer>¬© 2025 Lumipedia</footer>

<script>
// ===== Mode sombre =====
const btnTheme = document.getElementById('theme-toggle');
btnTheme.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    if(document.body.classList.contains('dark-mode')){
        btnTheme.textContent = '‚òÄÔ∏è Mode clair';
        localStorage.setItem('theme','dark');
    } else {
        btnTheme.textContent = 'üåô Mode sombre';
        localStorage.setItem('theme','light');
    }
});
if(localStorage.getItem('theme')==='dark'){
    document.body.classList.add('dark-mode');
    btnTheme.textContent='‚òÄÔ∏è Mode clair';
}

// ===== Jeu =====
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('start-btn');
const restartBtn = document.getElementById('restart-btn');
const bonusText = document.getElementById('bonus-text');

let circles = [];
let circleSpeed = 2;
let spawnInterval;
let score = 0;
let gameOver = false;

const player = {x: 270, y: 350, width:50, height:50, speed:5, invincible:false, normalSize:50};

let keys = {};

// PC controls
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// ==== Contr√¥les mobile ====
if (/Mobi|Android/i.test(navigator.userAgent)) {
    document.getElementById('mobile-controls').style.display = 'block';

    document.querySelectorAll('#mobile-controls button').forEach(btn => {
        btn.addEventListener('touchstart', () => {
            keys[btn.dataset.key] = true;
        });
        btn.addEventListener('touchend', () => {
            keys[btn.dataset.key] = false;
        });
    });
}

// ===== Fonctions du jeu =====
function spawnCircle(){
    let radius = Math.random()*20+15;
    let x = Math.random()*(canvas.width-radius*2)+radius;
    let y = -radius;
    let type = Math.random()<0.1 ? 'yellow':'red';
    circles.push({x,y,radius,type});
}

function updateCircles(){
    circles.forEach(c => c.y += circleSpeed);
    circles = circles.filter(c=>{
        if(c.y-c.radius>canvas.height){
            if(c.type==='red') score++;
            return false;
        }
        return true;
    });
    circleSpeed = Math.min(10,2+Math.floor(score/5));
}

function drawCircles(){
    circles.forEach(c=>{
        ctx.beginPath();
        ctx.arc(c.x,c.y,c.radius,0,Math.PI*2);
        ctx.fillStyle = c.type==='red'?'red':'yellow';
        ctx.fill();
    });
}

function checkCollision(){
    circles.forEach((c,i)=>{
        if(player.x < c.x+c.radius && player.x+player.width > c.x-c.radius &&
           player.y < c.y+c.radius && player.y+player.height > c.y-c.radius){
               if(c.type==='red' && !player.invincible){
                   endGame();
               } else if(c.type==='yellow'){
                   applyBonus();
                   circles.splice(i,1);
               }
           }
    });
}

function applyBonus(){
    let bonus = Math.random()<0.5?'Petit':'Plus rapide';
    if(bonus==='Petit'){
        player.width = player.height = 25;
        bonusText.textContent='Petit !';
        setTimeout(()=>{player.width=player.height=player.normalSize; bonusText.textContent='';},10000);
    } else {
        circleSpeed *= 1.5;
        bonusText.textContent='Plus rapide !';
        setTimeout(()=>{circleSpeed=Math.min(10,2+Math.floor(score/5)); bonusText.textContent='';},10000);
    }
}

function drawPlayer(){
    ctx.fillStyle = player.invincible?'blue':'#5b4fff';
    ctx.fillRect(player.x,player.y,player.width,player.height);
}

function drawScore(){
    ctx.fillStyle='black';
    ctx.font='20px Arial';
    ctx.fillText('Score : '+score,10,30);
}

function drawGameOver(){
    ctx.fillStyle='black';
    ctx.font='bold 40px Arial';
    ctx.fillText('GAME OVER',canvas.width/2-120,canvas.height/2);
    ctx.fillText('Score max : '+score,canvas.width/2-120,canvas.height/2+50);
    restartBtn.style.display='block';
}

function updatePlayer(){
    if(keys['ArrowLeft'] && player.x>0) player.x-=player.speed;
    if(keys['ArrowRight'] && player.x+player.width<canvas.width) player.x+=player.speed;
    if(keys['ArrowUp'] && player.y>0) player.y-=player.speed;
    if(keys['ArrowDown'] && player.y+player.height<canvas.height) player.y+=player.speed;
}

function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    updatePlayer();
    updateCircles();
    checkCollision();
    drawCircles();
    drawPlayer();
    drawScore();
    if(gameOver) return drawGameOver();
    requestAnimationFrame(gameLoop);
}

function startGame(){
    circles=[];
    circleSpeed=2;
    score=0;
    gameOver=false;
    restartBtn.style.display='none';
    startBtn.style.display='none';
    spawnInterval=setInterval(spawnCircle,800);
    gameLoop();
}

function endGame(){
    gameOver=true;
    clearInterval(spawnInterval);
    restartBtn.style.display='block';
}

startBtn.addEventListener('click',startGame);
restartBtn.addEventListener('click',startGame);

</script>
</body>
</html>
